{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "pulsewire server config",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "app",
    "http",
    "database",
    "sqlite",
    "logging",
    "dev",
    "auth",
    "seed"
  ],
  "properties": {
    "app": {
      "type": "object",
      "additionalProperties": false,
      "required": ["mode"],
      "properties": {
        "mode": {
          "type": "string",
          "enum": ["dev", "prod"]
        },
        "timezone": {
          "type": "string"
        }
      }
    },
    "http": {
      "type": "object",
      "additionalProperties": false,
      "required": ["host", "port"],
      "properties": {
        "host": {
          "type": "string"
        },
        "port": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535
        }
      }
    },
    "database": {
      "type": "object",
      "additionalProperties": false,
      "required": ["dialect"],
      "properties": {
        "dialect": {
          "type": "string",
          "enum": ["sqlite", "postgres"]
        }
      }
    },
    "sqlite": {
      "type": "object",
      "additionalProperties": false,
      "required": ["path"],
      "properties": {
        "path": {
          "type": "string"
        }
      }
    },
    "postgres": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "host",
        "port",
        "database",
        "user",
        "password",
        "ssl_mode",
        "schema",
        "fetcher_schema"
      ],
      "properties": {
        "host": {
          "type": "string"
        },
        "port": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535
        },
        "database": {
          "type": "string"
        },
        "user": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "ssl_mode": {
          "type": "string"
        },
        "schema": {
          "type": "string"
        },
        "fetcher_schema": {
          "type": "string"
        }
      }
    },
    "logging": {
      "type": "object",
      "additionalProperties": false,
      "required": ["level"],
      "properties": {
        "level": {
          "type": "string"
        }
      }
    },
    "auth": {
      "type": "object",
      "additionalProperties": false,
      "required": ["token_ttl_seconds"],
      "properties": {
        "token_ttl_seconds": {
          "type": "integer",
          "minimum": 1
        }
      }
    },
    "dev": {
      "type": "object",
      "additionalProperties": false,
      "required": ["reset_on_start"],
      "properties": {
        "reset_on_start": {
          "type": "boolean"
        }
      }
    },
    "seed": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "username",
        "password"
      ],
      "properties": {
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    }
  }
}
